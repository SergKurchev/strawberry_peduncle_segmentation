# üöÄ Depth Anything V3 vs V2: –ö—Ä–∞—Ç–∫–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ

## ‚úÖ –ì–ª–∞–≤–Ω—ã–π –≤—ã–≤–æ–¥: **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ V3!**

---

## üìä –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –ö—Ä–∏—Ç–µ—Ä–∏–π | V2 | V3 | –ü–æ–±–µ–¥–∏—Ç–µ–ª—å |
|----------|----|----|------------|
| **Monocular Depth** | ‚úÖ –•–æ—Ä–æ—à–æ | ‚úÖ –û—Ç–ª–∏—á–Ω–æ | üèÜ **V3** |
| **Metric Depth** | ‚úÖ –ï—Å—Ç—å | ‚úÖ –õ—É—á—à–µ | üèÜ **V3** |
| **Multi-View Depth** | ‚ùå –ù–µ—Ç | ‚úÖ –ï—Å—Ç—å | üèÜ **V3** |
| **Camera Pose Estimation** | ‚ùå –ù–µ—Ç | ‚úÖ –ï—Å—Ç—å | üèÜ **V3** |
| **3D Gaussians** | ‚ùå –ù–µ—Ç | ‚úÖ –ï—Å—Ç—å | üèÜ **V3** |
| **–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ intrinsics** | ‚ùå –ù–µ—Ç | ‚úÖ –ï—Å—Ç—å (Nested) | üèÜ **V3** |
| **–°–∫–æ—Ä–æ—Å—Ç—å** | –ë—ã—Å—Ç—Ä–∞—è | –°—Ä–µ–¥–Ω—è—è | ‚öñÔ∏è **V2** |
| **–†–∞–∑–º–µ—Ä –º–æ–¥–µ–ª–∏** | –°—Ä–µ–¥–Ω–∏–π | –ë–æ–ª—å—à–æ–π | ‚öñÔ∏è **V2** |
| **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** | –ü—Ä–æ—Å—Ç–∞—è | –û—á–µ–Ω—å –ø—Ä–æ—Å—Ç–∞—è | üèÜ **V3** |

---

## üéØ –î–ª—è Unity –ø—Ä–æ–µ–∫—Ç–∞

### V2 –ø–æ–¥—Ö–æ–¥:
```python
# –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å focal length –∏–∑ Unity
focal_length = 886.4  # –í—ã—á–∏—Å–ª–µ–Ω–æ –∏–∑ FOV=60¬∞
depth = model.infer_image(image)  # –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è –≥–ª—É–±–∏–Ω–∞
# Depth –≤ –º–µ—Ç—Ä–∞—Ö - –Ω—É–∂–Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
```

### V3 –ø–æ–¥—Ö–æ–¥ (Nested):
```python
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç camera intrinsics!
prediction = model.inference([image])
depth_meters = prediction.depth  # –£–ñ–ï –≤ –º–µ—Ç—Ä–∞—Ö!
estimated_focal = prediction.intrinsics[0, 0, 0]  # –ë–æ–Ω—É—Å
```

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ V3, –µ—Å–ª–∏:
- ‚úÖ –ù—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
- ‚úÖ –•–æ—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ camera parameters
- ‚úÖ –ü–ª–∞–Ω–∏—Ä—É–µ—Ç–µ multi-view reconstruction
- ‚úÖ –ù—É–∂–Ω–∞ –æ—Ü–µ–Ω–∫–∞ camera pose
- ‚úÖ –ï—Å—Ç—å GPU —Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –ø–∞–º—è—Ç—å—é

### –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ V2, –µ—Å–ª–∏:
- ‚ö° –ö—Ä–∏—Ç–∏—á–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å inference
- üíæ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ GPU –ø–∞–º—è—Ç—å
- üì± –ù—É–∂–Ω–∞ –ø—Ä–æ—Å—Ç–∞—è monocular depth –±–µ–∑ extras
- üéØ –£–∂–µ –µ—Å—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–∏–π pipeline –Ω–∞ V2

---

## üì¶ –ú–æ–¥–µ–ª–∏ –¥–ª—è Unity –ø—Ä–æ–µ–∫—Ç–∞

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è: DA3NESTED-GIANT-LARGE-1.1
```python
from depth_anything_3.api import DepthAnything3

model = DepthAnything3.from_pretrained(
    "depth-anything/DA3NESTED-GIANT-LARGE-1.1"
)

# –û–¥–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
prediction = model.inference([image])

# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:
# - prediction.depth: (H, W) –≤ –ú–ï–¢–†–ê–•
# - prediction.intrinsics: (3, 3) camera matrix
# - prediction.conf: (H, W) confidence map
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- Depth —Å—Ä–∞–∑—É –≤ –º–µ—Ç—Ä–∞—Ö (–Ω–µ –Ω—É–∂–Ω–∞ —Ñ–æ—Ä–º—É–ª–∞)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç focal length
- –õ—É—á—à–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
- Confidence map –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: DA3METRIC-LARGE
```python
model = DepthAnything3.from_pretrained(
    "depth-anything/DA3METRIC-LARGE"
)

prediction = model.inference([image])

# –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ –º–µ—Ç—Ä—ã
focal_length = 886.4  # –∏–∑ Unity
metric_depth = focal_length * prediction.depth / 300.0
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ë—ã—Å—Ç—Ä–µ–µ —á–µ–º Nested
- –ú–µ–Ω—å—à–µ GPU –ø–∞–º—è—Ç–∏
- –ü—Ä–æ—â–µ –¥–ª—è single-image inference

---

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### V2:
```bash
git clone https://github.com/DepthAnything/Depth-Anything-V2
cd Depth-Anything-V2/metric_depth
pip install -r requirements.txt
```

### V3:
```bash
pip install xformers torch>=2 torchvision
pip install git+https://github.com/ByteDance-Seed/Depth-Anything-3.git
```

---

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –¢–æ—á–Ω–æ—Å—Ç—å (AUC3 –º–µ—Ç—Ä–∏–∫–∞):

| Dataset | V2 (Hypersim) | V3 (Nested) | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|---------------|-------------|-----------|
| Indoor scenes | ~0.95 | **0.844** (HiRoom) | –°–æ–ø–æ—Å—Ç–∞–≤–∏–º–æ |
| DTU | - | **0.939** | - |
| ScanNet++ | - | **0.894** | - |

### –°–∫–æ—Ä–æ—Å—Ç—å (–Ω–∞ RTX 3090):

| –ú–æ–¥–µ–ª—å | FPS (1024√ó1024) | GPU Memory |
|--------|-----------------|------------|
| V2 (vitl) | ~30 FPS | ~4 GB |
| V3 (DA3METRIC-LARGE) | ~25 FPS | ~5 GB |
| V3 (DA3NESTED-GIANT) | ~15 FPS | ~8 GB |

---

## üéì –ò—Ç–æ–≥–æ–≤–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

### –î–ª—è –≤–∞—à–µ–≥–æ Unity –ø—Ä–æ–µ–∫—Ç–∞ —Å –∫—É–±–∞–º–∏ –∏ –ø–∞—Ä–∞–ª–ª–µ–ª–µ–ø–∏–ø–µ–¥–∞–º–∏:

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Depth Anything V3 (DA3NESTED-GIANT-LARGE-1.1)**

**–ü–æ—á–µ–º—É**:
1. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç camera intrinsics (–Ω–µ –Ω—É–∂–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑ Unity)
2. ‚úÖ Depth —Å—Ä–∞–∑—É –≤ –º–µ—Ç—Ä–∞—Ö (—É–ø—Ä–æ—â–∞–µ—Ç –∫–æ–¥)
3. ‚úÖ –õ—É—á—à–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –¥–ª—è indoor —Å—Ü–µ–Ω
4. ‚úÖ Confidence map –ø–æ–º–æ–≥–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏
5. ‚úÖ –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å multi-view –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞

**Pipeline**:
```
Unity ‚Üí RGB images
    ‚Üì
Mask R-CNN ‚Üí Segmentation + Associations
    ‚Üì
DA3 Nested ‚Üí Depth –≤ –º–µ—Ç—Ä–∞—Ö
    ‚Üì
–†–µ–∑—É–ª—å—Ç–∞—Ç: –î–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞:
  - –ö–ª–∞—Å—Å (–∫—É–±/–ø–∞—Ä–∞–ª–ª–µ–ª–µ–ø–∏–ø–µ–¥)
  - –ú–∞—Å–∫–∞
  - –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –≤ –º–µ—Ç—Ä–∞—Ö
  - –°–≤—è–∑—å —Å —Ä–æ–¥–∏—Ç–µ–ª–µ–º
  - 3D –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

---

## üìö –°—Å—ã–ª–∫–∏

- **V2 GitHub**: https://github.com/DepthAnything/Depth-Anything-V2
- **V3 GitHub**: https://github.com/ByteDance-Seed/Depth-Anything-3
- **V2 Paper**: https://arxiv.org/abs/2406.09414
- **V3 Models**: https://huggingface.co/depth-anything
